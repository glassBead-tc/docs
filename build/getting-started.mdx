---
title: 'Getting Started'
description: 'Learn how to develop and build Model Context Protocol (MCP) servers using TypeScript with Smithery CLI.'
---

# Getting Started with TypeScript MCPs

The Smithery CLI provides powerful tools for TypeScript developers to build, test, and deploy Model Context Protocol (MCP) servers.

## Prerequisites

- Node.js 18+ 
- npm or yarn
- A [Smithery API key](https://smithery.ai) for development features

## Quick Start

### 1. Install CLI

```bash
npm install -g @smithery/cli
```

### 2. Initialize Project

```bash
mkdir mcp-server
cd mcp-server
npm init -y
npm install @modelcontextprotocol/sdk zod
mkdir src
touch src/index.ts
```

### 3. Create Your Server

Create `src/index.ts`:

**Choose your server type:**

- **Stateless**: Best for most use cases. Each request is independent with no shared state between calls. (e.g., search APIs)
- **Stateful**: Use when you need to maintain data across requests within a session (e.g., database connections, code interpreters).

<CodeGroup>

```typescript Stateless Server
import { McpServer } from '@modelcontextprotocol/sdk/server/mcp.js';
import { z } from 'zod';

// Optional: Define configuration schema
export const configSchema = z.object({
  apiKey: z.string().describe("Your API key"),
  debug: z.boolean().default(false).describe("Enable debug logging")
});

export function createStatelessServer({ config }: { config: z.infer<typeof configSchema> }) {
  const server = new McpServer({
    name: 'My MCP Server',
    version: '1.0.0'
  });

  // Add a tool
  server.tool(
    'hello',
    'Say hello to someone',
    {
      name: z.string().describe('Name to greet')
    },
    async ({ name }) => {
      return {
        content: [{ type: 'text', text: `Hello, ${name}!` }]
      };
    }
  );

  return server.server;
}
```

```typescript Stateful Server
import { McpServer } from '@modelcontextprotocol/sdk/server/mcp.js';
import { z } from 'zod';

// Optional: Define configuration schema
export const configSchema = z.object({
  apiKey: z.string().describe("Your API key"),
  debug: z.boolean().default(false).describe("Enable debug logging")
});

export function createStatefulServer({ 
  sessionId, 
  config 
}: { 
  sessionId: string; 
  config: z.infer<typeof configSchema> 
}) {
  const server = new McpServer({
    name: 'My Stateful MCP Server',
    version: '1.0.0'
  });

  // Session-specific state
  const sessionData = new Map();

  server.tool(
    'get_session',
    'Get current session ID',
    {},
    async () => {
      return {
        content: [{ type: 'text', text: `Session: ${sessionId}` }]
      };
    }
  );

  server.tool(
    'store_data',
    'Store data in session',
    {
      key: z.string().describe('Storage key'),
      value: z.string().describe('Value to store')
    },
    async ({ key, value }) => {
      sessionData.set(key, value);
      return {
        content: [{ type: 'text', text: `Stored ${key}: ${value}` }]
      };
    }
  );

  return server.server;
}
```

</CodeGroup>

### 4. Configure Entry Point

Update your `package.json` to specify the entry point:

```json
{
  "name": "mcp-server",
  "module": "./src/index.ts",
  "type": "module"
}
```

### 5. Start Development

```bash
npx @smithery/cli dev
```

This will:
- Read your entry point from the `module` field in `package.json`
- Start your server with hot-reload
- Open the Smithery playground for you to test

### 6. Deploy

Add a [smithery.yaml](/build/project-config/smithery-yaml#typescript-runtime-configuration) file to your project root:

```smithery.yaml
runtime: typescript
```

Then [deploy](/build/deployments) from Smithery's UI.

## Key Concepts

### Configuration Schema

Export a `configSchema` using Zod for type-safe configuration:

```typescript
export const configSchema = z.object({
  apiKey: z.string().describe("Required API key"),
  options: z.object({
    timeout: z.number().default(5000),
    retries: z.number().default(3)
  }).optional()
});
```

Benefits:
- Type safety with `z.infer<typeof configSchema>`
- Runtime validation
- Auto-generated UI forms

### Server Types

**Stateless**: Each request is independent and we will create a new instance of your server for each request.
```typescript
export function createStatelessServer({ config }) { ... }
```

**Stateful**: Session-aware. We will create a new instance of your server for each session. You can identify sessions via the `sessionId` parameter.
```typescript
export function createStatefulServer({ sessionId, config }) { ... }
```

## Building

### Build for Production

The Smithery CLI supports building servers for different transport protocols:

#### SHTTP Transport (Default)
SHTTP (Streamable HTTP) is for MCPs that are meant to be deployed online:

```bash
npx @smithery/cli build
# or explicitly specify shttp
npx @smithery/cli build --transport shttp
```

#### STDIO Transport
STDIO transport is for MCPs that are meant to be used within a local environment:

```bash
npx @smithery/cli build --transport stdio
```

#### Custom Entry Point & Output

```bash
# Build with custom entry file
npx @smithery/cli build src/my-server.ts
```

Creates `.smithery/index.cjs` - a bundled, production-ready server.

### Test Built Server

#### SHTTP Server
```bash
node .smithery/index.cjs
# Server starts on http://localhost:8181
```

#### STDIO Server
```bash
# Test with configuration
node .smithery/index.cjs apiKey=your-key debug=true